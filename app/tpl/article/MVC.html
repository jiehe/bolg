<div class="md-section-divider"></div>

<div class="md-section-divider"></div>

<h1 id="mvc" data-anchor-id="klhc">MVC</h1>

<p data-anchor-id="jn09"><code>MV*</code></p>

<hr>

<p data-anchor-id="1u1r">M(model):数据模型 <br>
V(view):视图 <br>
C(control):控制器</p>

<div class="md-section-divider"></div>

<h2 id="数据模型" data-anchor-id="xeft">数据模型：</h2>

<p data-anchor-id="xcl9">对于MVC，来说，最重要的是<code>M</code>数据模型。数据模型应该不仅储蓄数据，还有数据交互的办法。数据交互包括model.set()、model.get()，ajax功能。set功能是验证数据。get是获取数据，ajax是获取和更新数据。 <br>
   Backbone的Backbone.Extend.Model 就是提供了set、get和ajax交互办法。angular的model是<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-1" style="width: 34.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 27.752em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.602em 1000.002em 2.902em -0.398em); top: -2.548em; left: 0.003em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="texatom" id="MathJax-Span-8"><span class="mrow" id="MathJax-Span-9"><span class="mo" id="MathJax-Span-10"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">。</span></span></span></span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="texatom" id="MathJax-Span-18"><span class="mrow" id="MathJax-Span-19"><span class="mo" id="MathJax-Span-20"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">的</span></span></span></span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="texatom" id="MathJax-Span-26"><span class="mrow" id="MathJax-Span-27"><span class="mo" id="MathJax-Span-28"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">是</span></span></span></span><span class="texatom" id="MathJax-Span-29"><span class="mrow" id="MathJax-Span-30"><span class="mo" id="MathJax-Span-31"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">一</span></span></span></span><span class="texatom" id="MathJax-Span-32"><span class="mrow" id="MathJax-Span-33"><span class="mo" id="MathJax-Span-34"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">个</span></span></span></span><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="texatom" id="MathJax-Span-37"><span class="mrow" id="MathJax-Span-38"><span class="mo" id="MathJax-Span-39"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">对</span></span></span></span><span class="texatom" id="MathJax-Span-40"><span class="mrow" id="MathJax-Span-41"><span class="mo" id="MathJax-Span-42"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">象</span></span></span></span><span class="texatom" id="MathJax-Span-43"><span class="mrow" id="MathJax-Span-44"><span class="mo" id="MathJax-Span-45"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">，</span></span></span></span><span class="texatom" id="MathJax-Span-46"><span class="mrow" id="MathJax-Span-47"><span class="mo" id="MathJax-Span-48"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">不</span></span></span></span><span class="texatom" id="MathJax-Span-49"><span class="mrow" id="MathJax-Span-50"><span class="mo" id="MathJax-Span-51"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">提</span></span></span></span><span class="texatom" id="MathJax-Span-52"><span class="mrow" id="MathJax-Span-53"><span class="mo" id="MathJax-Span-54"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">供</span></span></span></span><span class="texatom" id="MathJax-Span-55"><span class="mrow" id="MathJax-Span-56"><span class="mo" id="MathJax-Span-57"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">数</span></span></span></span><span class="texatom" id="MathJax-Span-58"><span class="mrow" id="MathJax-Span-59"><span class="mo" id="MathJax-Span-60"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">据</span></span></span></span><span class="texatom" id="MathJax-Span-61"><span class="mrow" id="MathJax-Span-62"><span class="mo" id="MathJax-Span-63"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">交</span></span></span></span><span class="texatom" id="MathJax-Span-64"><span class="mrow" id="MathJax-Span-65"><span class="mo" id="MathJax-Span-66"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">互</span></span></span></span><span class="texatom" id="MathJax-Span-67"><span class="mrow" id="MathJax-Span-68"><span class="mo" id="MathJax-Span-69"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">办</span></span></span></span><span class="texatom" id="MathJax-Span-70"><span class="mrow" id="MathJax-Span-71"><span class="mo" id="MathJax-Span-72"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">法</span></span></span></span><span class="texatom" id="MathJax-Span-73"><span class="mrow" id="MathJax-Span-74"><span class="mo" id="MathJax-Span-75"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">。</span></span></span></span><span class="texatom" id="MathJax-Span-76"><span class="mrow" id="MathJax-Span-77"><span class="mo" id="MathJax-Span-78"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">是</span></span></span></span><span class="texatom" id="MathJax-Span-79"><span class="mrow" id="MathJax-Span-80"><span class="mo" id="MathJax-Span-81"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">直</span></span></span></span><span class="texatom" id="MathJax-Span-82"><span class="mrow" id="MathJax-Span-83"><span class="mo" id="MathJax-Span-84"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">接</span></span></span></span><span class="texatom" id="MathJax-Span-85"><span class="mrow" id="MathJax-Span-86"><span class="mo" id="MathJax-Span-87"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">通</span></span></span></span><span class="texatom" id="MathJax-Span-88"><span class="mrow" id="MathJax-Span-89"><span class="mo" id="MathJax-Span-90"><span style="font-family: STIXGeneral, 'Arial Unicode MS', serif; font-size: 80%; font-style: normal; font-weight: normal;">过</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.552em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.378em; vertical-align: -0.309em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">scope。angular的model是一个js对象，不提供数据交互办法。是直接通过</script>http服务进行ajax交互，然后添加到scope上的。 <br>
M 决定了视图的显示，所以视图需要的<strong>所有数据的业务逻辑</strong>都必须在控制器处理好保存在数据模型里面。<strong>不要在视图里面处理业务逻辑</strong>。</p>

<p data-anchor-id="lopb">比如： 你有一个分页功能，共有7页，当前页是第一页。 <br>
正确做法：你应该在model里面建一个数组[1,2,3,4,5,6,7]，然后在视图template上遍历渲染出来； <br>
错误做法：不应该运用视图template的语法在视图层用for（var i=1;i&lt;=7;i++）等语法循环出来。</p>

<div class="md-section-divider"></div>

<h2 id="视图" data-anchor-id="a9gc">视图：</h2>

<p data-anchor-id="q62v">V视图是根据数据模型来渲染，这里的渲染指的是模版的渲染，不是浏览器的渲染，常用的模版ejs、underscore的template、jadejs、dustjs等。视图template的作用是用template的语法把数据和html结合起来渲染成纯html字符串。 <br>
在进行数据展示的时候，如果用纯javascript进行拼接处理，将是一个比较繁琐的过程，而且写出来的代码不直观，可读性比较低，<code>对维护人员来说是个灾难</code>。 <br>
例如使用纯粹的javascript将是这样的：</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="mph4"><ol class="linenums"><li class="L0"><code><span class="kwd">var</span><span class="pln"> names</span><span class="pun">=[</span><span class="str">'marry'</span><span class="pun">,</span><span class="str">'jack'</span><span class="pun">,</span><span class="str">'perter'</span><span class="pun">];</span></code></li><li class="L1"><code><span class="kwd">var</span><span class="pln"> result </span><span class="pun">=</span><span class="str">''</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">result </span><span class="pun">+=</span><span class="pln"> </span><span class="str">'&lt;ul&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">;</span></code></li><li class="L3"><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> names</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">  result </span><span class="pun">+=</span><span class="pln"> </span><span class="str">'&lt;li&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> names</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'&lt;/li&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">result </span><span class="pun">+=</span><span class="pln"> </span><span class="str">'&lt;/ul&gt;'</span></code></li></ol></pre>

<p data-anchor-id="xqe0">用dustjs模版是这样的：</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="9ki1"><ol class="linenums"><li class="L0"><code><span class="kwd">var</span><span class="pln"> names</span><span class="pun">=[</span><span class="str">'marry'</span><span class="pun">,</span><span class="str">'jack'</span><span class="pun">,</span><span class="str">'perter'</span><span class="pun">];</span></code></li></ol></pre>

<p data-anchor-id="6mkg">模板：</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="xacp"><ol class="linenums"><li class="L0"><code><span class="tag">&lt;ul&gt;</span></code></li><li class="L1"><code><span class="pln">{#names}</span></code></li><li class="L2"><code><span class="tag">&lt;li&gt;</span><span class="pln">{.}</span><span class="tag">&lt;/li&gt;</span></code></li><li class="L3"><code><span class="pln">{/names}</span></code></li><li class="L4"><code><span class="tag">&lt;/ul&gt;</span></code></li></ol></pre>

<p data-anchor-id="3z21">html字符串拼接很长的话，是自己痛苦和别人维护也很痛苦的事情，用模版就很清晰了。</p>

<div class="md-section-divider"></div>

<h2 id="控制器" data-anchor-id="n0gg">控制器</h2>

<p data-anchor-id="qft1">C控制器是把数据进行交互、拼接业务逻辑的地方（js文件）。在spa（单页面）中，由router（路由）来充当控制器，进行数据的交互、处理和管理页面的跳转。</p>
